{% extends "_base.html" %}
{% load static %}

{% block page_title %}
    ReportHub - Projects Dashboard
{% endblock page_title %}

{% block content %}
    <div class="container">
        <div class="dashboard-page-top-panel">
            <div class="tabs-nav-holder">
                <ul class="tabs-nav">
                </ul>
            </div>
            <div class="actions-panel">
                <div class="filter-holder">
                    <a href="#" class="btn btn-red filter-open">Filter
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 23 23" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75" />
                        </svg>
                    </a>
                    <form action="#" class="filter-form">
                        <div class="filter-options">
                            <div class="block-top">
                                <span class="title">Filter</span>
                                <a class="filter-close" href="#"></a>
                            </div>
                            <div class="filter-heading-text">
                                <span>
                                    <span class="info-sign"></span>
                                    Get your project data sorted.
                                </span>
                                
                            </div>
                            <div class="block-body">
                                <div class="select-field">
                                    <label>Donors</label>
                                    <div class="small-label">[hold down the control/command button to select multiple]</div>
                                    <!-- {{ project_filter.form.donors }} -->
                                </div>
                                <div class="select-field ">
                                    <label for="{{ project_filter.form.clusters.id_for_label }}">Clusters / Sectors</label>
                                    <div class="small-label">[hold down the control/command button to select multiple]</div>
                                    <!-- {{ project_filter.form.clusters }} -->
                                </div>
                                <div class="select-field">
                                    <label>Activity Domain</label>
                                    <div class="small-label">[hold down the control/command button to select multiple]</div>
                                    <!-- {{ project_filter.form.activity_domains }} -->
                                </div>
                                <div class="date-picker-field">
                                    <div class="date start">
                                        <label>Start Date</label>
                                        <!-- {{ project_filter.form.start_date }} -->
                                    </div>
                                    <div class="date end">
                                        <label>End Date</label>
                                        <!-- {{ project_filter.form.end_date }} -->
                                    </div>
                                </div>
                                <div class="select-field">
                                    <label>Implementing Partner</label>
                                    <div class="small-label">[hold down the control/command button to select multiple]</div>
                                    <!-- {{ project_filter.form.implementing_partners }} -->
                                </div>
                                <div class="select-field">
                                    <label>Programme Partner</label>
                                    <div class="small-label">[hold down the control/command button to select multiple]</div>
                                    <!-- {{ project_filter.form.programme_partners }} -->
                                </div>
                                <div class="select-field">
                                    <label>Focal Person</label>
                                    <!-- {{ project_filter.form.user }} -->
                                </div>
                            </div>
                            <div class="block-footer">
                                <div class="btn-wrapper">
                                    <a class="btn btn-gray-outline"
                                        href="{% url 'projects-list' %}?state={{request.GET.state}}">Reset</a>
                                    <button type="submit" class="btn btn-red">Apply</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="export-formats-holder">
                    <a href="#" class="btn btn-gray export-open">
                        <span class="btn-text">Export</span>
                        <span class="icon-download"></span>
                    </a>
                    <div class="export-formats">
                        <span class="title">File format</span>
                        <div class="format-list">
                            <div class="export-link-holder">
                                <a class="export-link" href="#">
                                    CSV
                                </a>
                            </div>
                            <div class="export-link-holder">
                                <a class="export-link" href="#">
                                    Excel
                                </a>
                            </div>
                            <div class="export-link-holder">
                                <a class="export-link" href="#" >
                                    JSON
                                </a>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>

        <div class="content-block top-border bottom-border">
            <div class="table-wrapper-scrollable">
                <table class="table all-projects-table js-collapsible-table">
                    <thead>
                        <tr>
                            <th class="update-date-col">
                                <div class="table-flex-holder">
                                    <div class="input-check-holder">
                                        <input type="checkbox"
                                                id="table-head-check-01"
                                                data-check-pattern="[name^='table-check']" />
                                        <label for="table-head-check-01">
                                            <span class="input"></span>
                                        </label>
                                    </div>
                                    <strong class="table-title" title="Report">Report</strong>
                                    <div class="table-sort-buttons">
                                        <button type="button">
                                            <span class="icon-chevron-up"></span>
                                        </button>
                                        <button type="button">
                                            <span class="icon-chevron-down"></span>
                                        </button>
                                    </div>
                                </div>
                            </th>
                            <th class="location-col">
                                <div class="table-flex-holder">
                                    <strong class="table-title">Project Title</strong>
                                </div>
                            </th>
                            <th class="location-col">
                                <div class="table-flex-holder">
                                    <strong class="table-title">Cluster/Sector</strong>
                                    <div class="table-sort-buttons">
                                        <button type="button">
                                            <span class="icon-chevron-up"></span>
                                        </button>
                                        <button type="button">
                                            <span class="icon-chevron-down"></span>
                                        </button>
                                    </div>
                                </div>
                            </th>
                            <th class="update-date-col">
                                <div class="table-flex-holder">
                                    <strong class="table-title">Organization</strong>
                                    <div class="table-sort-buttons">
                                        <button type="button">
                                            <span class="icon-chevron-up"></span>
                                        </button>
                                        <button type="button">
                                            <span class="icon-chevron-down"></span>
                                        </button>
                                    </div>
                                </div>
                            </th>
                            <th class="location-col">
                                <div class="table-flex-holder">
                                    <strong class="table-title">Focal Person</strong>
                                </div>
                            </th>
                            
                            <th class="location-col">
                                <div class="table-flex-holder">
                                    <strong class="table-title">Contact</strong>
                                </div>
                            </th>
                            <th class="location-col">
                                <div class="table-flex-holder">
                                    <strong class="table-title">Period</strong>
                                </div>
                            </th>
                            <th class="location-col">
                                <div class="table-flex-holder">
                                    <strong class="table-title">Report Status</strong>
                                </div>
                            </th>
                        </tr>
                    </thead>
                    
                    <tbody>
                        {% for report in project_reports %}
                            <tr>
                                
                                <td class="update-date-col" data-title="Month">
                                    <a class="table-flex-holder" href="{% url 'view_monthly_report' project=report.project.id report=report.id %}">
                                        <div class="input-check-holder">
                                            <input type="checkbox" id="table-check-{{report.pk}}" class="project-checkbox" value="{{report.pk}}" name="table-check{{report.pk}}" />
                                            <label for="table-check-{{report.pk}}">
                                                <span class="input"></span>
                                            </label>
                                        </div>
                                        {{ report}}
                                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0,0,256,256">
                                            <g fill="#6d6e71" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(8,8)"><path d="M18,5v2h5.5625l-12.28125,12.28125l1.4375,1.4375l12.28125,-12.28125v5.5625h2v-9zM5,9v18h18v-13l-2,2v9h-14v-14h9l2,-2z"></path></g></g>
                                        </svg>
                                    </a>
                                </td>
                                
                                <td class="location-col">
                                    <a class="table-flex-holder" href="{% url 'projects-detail' report.project.id %}" target="_">
                                        <div class="input-check-holder">
                                            <input type="checkbox" id="table-check-{{report.project.pk}}" class="project-checkbox" value="{{report.project.pk}}" name="table-check{{report.project.pk}}" />
                                            <label for="table-check-{{report.project.pk}}">
                                                <span class="input"></span>
                                            </label>
                                        </div>
                                        {{ report.project.title }}
                                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0,0,256,256">
                                            <g fill="#6d6e71" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(8,8)"><path d="M18,5v2h5.5625l-12.28125,12.28125l1.4375,1.4375l12.28125,-12.28125v5.5625h2v-9zM5,9v18h18v-13l-2,2v9h-14v-14h9l2,-2z"></path></g></g>
                                        </svg>
                                    </a>
                                </td>
                                <td class="location-col" data-title="Clusters">
                                    {% for cluster in report.project.clusters.all %}
                                        {{ cluster.name }}
                                        {% if not forloop.last %},{% endif %}
                                    {% endfor %}
                                </td>
                                <td class="update-date-col" data-title="Clusters">
                                    {% for organization in report.project.implementing_partners.all %}
                                        {{ organization.name }}
                                        {% if not forloop.last %},{% endif %}
                                    {% endfor %}
                                </td>
                                <td class="location-col">
                                    {{report.project.user}}
                                </td>
                                <td class="location-col">
                                    {{report.project.user.email}}
                                </td>
                                <td class="location-col">
                                    {{ report.report_date }}
                                </td>
                                <td class="location-col">
                                    <span class="{{ report.state }}">
                                        {{ report.get_state_display }}
                                    </span>
                                </td>
                            </tr>
                        
                        {% endfor %}
                        
                    </tbody>
                </table>
            </div>
        </div>

    </div>
{% endblock content %}

{% block scripts %}
    
{% endblock scripts %}